let Todos,Joi;_e88‍.w("../models/todos",[["default",["Todos"],function(v){Todos=v}]]);_e88‍.w("joi",[["default",["Joi"],function(v){Joi=v}]]);// const Todos = require('../models/todos')





module.exports.create = async function( req , res , next){
let datas=[];
   const todosSchema = Joi.object({
        userId :  Joi.string().required(),
        title :  Joi.string().required(),
        completed :  Joi.boolean().required(), 
    
    });
            //validation
            const {error} = todosSchema.validate(req.body);
            if(error){
                return next(error) 
            }

            const { userId, title, completed } = req.body;
            let todoss;
            try {
                todoss = await Todos.create({
                    userId,
                    title,
                    completed
                });
            }
            catch(err){
                return next (err)
            }
            datas.push(todoss)
            _e88‍.g.console.log(datas);
            res.status(201).send(datas);
    }

    module.exports.index = async function( req , res , next){
        // let keyName = "NameKey";
        // const getCatchData = await 
                 let todoss;
                 try {
                    todoss = await Todos.find({});
                 }
                 catch(err){
                     return next (err)
                 }
                 res.status(201).json(todoss);
         }

         module.exports.show = async function( req , res , next){
                     let todoss;
                     try {
                         todoss = await Todos.findById({_id : req.params.id});
                     }
                     catch(err){
                         return next (err)
                     }
                     res.status(201).json({todoss});
             }

             module.exports.destroy = async function( req , res , next){
                let todoss;
                try {
                    todoss = await Todos.findByIdAndDelete({_id : req.params.id});
                    if(!todoss){
                        return next(new Error("Nothing to delete"))
                    }
                }
                catch(err){
                    return next (err)
                }
                res.status(201).json({todoss});
        }
     
         
         
     
     
     


